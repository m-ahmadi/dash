{"version":3,"sources":["../../../../../src/js/wizard/wiz4/dataTable.js"],"names":["define","inst","u","extend","newPubSub","temp","getTemps","parent","rows","newRow","device","id","append","deviceRow","name","root","children","last","els","getEls","remove","on","bleep","effect","color","toggle","b","toDisable","attr","disabled","find","emit","isEmptyObj","addRow","getData","data","Object","keys","forEach","row","k","doAll","action","arg","removeAll","toggleAll","init"],"mappings":"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","file":"dataTable.js","sourcesContent":["define([], () => {\r\n\tconst inst = u.extend( newPubSub() );\r\n\tconst temp = u.getTemps(\"wizard/wiz4\");\r\n\t\r\n\tlet parent;\r\n\tlet rows = {};\r\n\t\r\n\tfunction newRow(device) {\r\n\t\tlet id = device.id;\r\n\t\tparent.append(temp.deviceRow({\r\n\t\t\tid: id,\r\n\t\t\tname: device.name\r\n\t\t}));\r\n\t\tlet root = parent.children().last();\r\n\t\tlet els = u.getEls(root);\r\n\t\tels.remove.on(\"click\", remove);\r\n\t\t\r\n\t\tfunction bleep() {\r\n\t\t\tels.root.effect(\"highlight\", {color: \"#bcff65\"}, 400);\r\n\t\t}\r\n\t\tfunction toggle(b) {\r\n\t\t\tels.toDisable.attr({disabled: !b});\r\n\t\t}\r\n\t\tfunction remove() {\r\n\t\t\tparent.find(`> tr[data-id=\"${id}\"]`).remove();\r\n\t\t\tdelete rows[id];\r\n\t\t\tinst.emit(\"remove\", id);\r\n\t\t\tif ( u.isEmptyObj(rows) ) inst.emit(\"remove_all\");\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\tid: id,\r\n\t\t\tname: device.name,\r\n\t\t\ttoggle, remove, bleep\r\n\t\t};\r\n\t}\r\n\t\r\n\tfunction addRow(device) {\r\n\t\tlet id = device.id;\r\n\t\tif ( !rows[id] ) {\r\n\t\t\trows[id] = newRow(device);\r\n\t\t\tinst.emit(\"add\", id);\r\n\t\t} else {\r\n\t\t\trows[id].bleep();\r\n\t\t}\r\n\t}\r\n\tfunction getData() {\r\n\t\tif ( u.isEmptyObj(rows) ) return;\r\n\t\tlet data = {};\r\n\t\tObject.keys(rows).forEach(k => {\r\n\t\t\tlet row = rows[k];\r\n\t\t\tlet id = row.id;\r\n\t\t\tdata[id] = {\r\n\t\t\t\tid: id,\r\n\t\t\t\tname: row.name\r\n\t\t\t};\r\n\t\t});\r\n\t\treturn data;\r\n\t}\r\n\tfunction doAll(action, arg) {\r\n\t\tObject.keys(rows).forEach( k => rows[k][action](arg) );\r\n\t}\r\n\t\r\n\tinst.addRow = addRow;\r\n\tinst.getData = getData;\r\n\t\r\n\tinst.removeAll = () => {\r\n\t\tdoAll(\"remove\");\r\n\t\treturn inst;\r\n\t};\r\n\tinst.toggleAll = b => {\r\n\t\tdoAll(\"toggle\", b);\r\n\t\treturn inst;\r\n\t};\r\n\t\r\n\tinst.init = (root) => {\r\n\t\tparent = root;\r\n\t};\r\n\treturn inst;\r\n});"]}
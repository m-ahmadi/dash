{"version":3,"sources":["../../../src/js/process.js"],"names":["define","uk","inst","u","extend","newPubSub","ROOT","temp","getTemps","els","doingMsg","timer","resume","openModal","open","$","remove","clear","reset","close","setTimeout","closeModal","logs","empty","set","log","msg","type","ctx","str","message","append","alert","inc","steps","n","parseFloat","bar","val","trigger","get","parseInt","init","getEls","on","percent","text","e","target","doing","currently","start","stop","clearTimeout","finish","window","proc"],"mappings":"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","file":"process.js","sourcesContent":["define([\"core/uk\"], (uk) => {\r\n\tconst inst = u.extend( newPubSub() );\r\n\tconst ROOT = \"[data-root='process']\";\r\n\tconst temp = u.getTemps(\"process\");\r\n\tlet els;\r\n\tlet doingMsg = \"\";\r\n\tlet timer;\r\n\t\r\n\t\r\n\tfunction resume() {\r\n\t\tuk.openModal(ROOT);\r\n\t}\r\n\tfunction open() {\r\n\t\t$(\"#overlay\").remove();\r\n\t\tclear();\r\n\t\treset();\r\n\t\tuk.openModal(ROOT);\r\n\t}\r\n\tfunction close() {\r\n\t\tsetTimeout(() => uk.closeModal(ROOT), 1000);\r\n\t}\r\n\tfunction clear() {\r\n\t\tels.logs.empty();\r\n\t}\r\n\tfunction reset() {\r\n\t\tset(0);\r\n\t}\r\n\tfunction log(msg, type) {\r\n\t\tconst ctx = {};\r\n\t\tconst str = type || \"primary\";\r\n\t\tctx.message = msg;\r\n\t\tctx.type = str;\r\n\t\tctx[str] = true;\r\n\t\tels.logs.append( temp.alert(ctx) );\r\n\t}\r\n\tfunction inc(steps) {\r\n\t\tlet n = parseFloat(els.bar.val(), 10);\r\n\t\tset(n += steps || 1);\r\n\t}\r\n\tfunction set(n) {\r\n\t\tels.bar.val(n).trigger(\"change\");\r\n\t}\r\n\tfunction get(n) {\r\n\t\treturn parseInt(els.bar.val(), 10);\r\n\t}\r\n\tfunction init() {\r\n\t\tels = u.getEls(ROOT);\r\n\t\tels.bar.on(\"change\", e => {\r\n\t\t\tels.percent.text( $(e.target).val() );\r\n\t\t});\r\n\t}\r\n\tfunction doing(msg, append) {\r\n\t\tif (append) {\r\n\t\t\tels.currently.text(doingMsg + msg);\r\n\t\t} else {\r\n\t\t\tdoingMsg = msg;\r\n\t\t\tels.currently.text(doingMsg);\r\n\t\t}\r\n\t}\r\n\tfunction start(steps) {\r\n\t\ttimer = setTimeout(() => {\r\n\t\t\tinc(1);\r\n\t\t\tstart();\r\n\t\t}, 800);\r\n\t}\r\n\tfunction stop() {\r\n\t\tclearTimeout(timer);\r\n\t}\r\n\tfunction finish() {\r\n\t\tset(100);\r\n\t\tclose();\r\n\t}\r\n\t\r\n\tinst.resume = resume;\r\n\tinst.open = open;\r\n\tinst.close = close;\r\n\tinst.log = log;\r\n\tinst.clear = clear;\r\n\tinst.reset = reset;\r\n\tinst.set = set;\r\n\tinst.get = get;\r\n\tinst.inc = inc;\r\n\tinst.doing = doing;\r\n\tinst.start = start;\r\n\tinst.stop = stop;\r\n\tinst.finish = finish;\r\n\tinst.init = init;\r\n\t\r\n\twindow.proc = inst;\r\n\treturn inst;\r\n});"]}
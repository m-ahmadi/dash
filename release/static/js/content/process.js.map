{"version":3,"sources":["../../../src/js/content/process.js"],"names":["define","uk","inst","u","extend","newPubSub","ROOT","temp","Handlebars","templates","els","doingMsg","timer","resume","openModal","open","clear","reset","close","setTimeout","closeModal","logs","empty","set","log","msg","type","ctx","str","message","append","procAlert","inc","steps","n","parseFloat","bar","val","trigger","get","parseInt","init","getEls","on","percent","text","$","e","target","doing","currently","start","stop","clearTimeout","finish","window","proc"],"mappings":"AAAAA,OAAO,CAAC,IAAD,CAAP,EAAe,UAACC,EAAD,EAAQ;AACtB,KAAMC,OAAOC,EAAEC,MAAF,CAAUC,WAAV,CAAb;AACA,KAAMC,OAAO,uBAAb;AACA,KAAMC,OAAOC,WAAWC,SAAxB;AACA,KAAIC,YAAJ;AACA,KAAIC,WAAW,EAAf;AACA,KAAIC,cAAJ;;AAGA,UAASC,MAAT,GAAkB;AACjBZ,KAAGa,SAAH,CAAaR,IAAb;AACA;AACD,UAASS,IAAT,GAAgB;AACfC;AACAC;AACAhB,KAAGa,SAAH,CAAaR,IAAb;AACA;AACD,UAASY,KAAT,GAAiB;AAChBC,aAAW;AAAA,UAAMlB,GAAGmB,UAAH,CAAcd,IAAd,CAAN;AAAA,GAAX,EAAsC,IAAtC;AACA;AACD,UAASU,KAAT,GAAiB;AAChBN,MAAIW,IAAJ,CAASC,KAAT;AACA;AACD,UAASL,KAAT,GAAiB;AAChBM,MAAI,CAAJ;AACA;AACD,UAASC,GAAT,CAAaC,GAAb,EAAkBC,IAAlB,EAAwB;AACvB,MAAMC,MAAM,EAAZ;AACA,MAAMC,MAAMF,QAAQ,SAApB;AACAC,MAAIE,OAAJ,GAAcJ,GAAd;AACAE,MAAID,IAAJ,GAAWE,GAAX;AACAD,MAAIC,GAAJ,IAAW,IAAX;AACAlB,MAAIW,IAAJ,CAASS,MAAT,CAAiBvB,KAAKwB,SAAL,CAAeJ,GAAf,CAAjB;AACA;AACD,UAASK,GAAT,CAAaC,KAAb,EAAoB;AACnB,MAAIC,IAAIC,WAAWzB,IAAI0B,GAAJ,CAAQC,GAAR,EAAX,EAA0B,EAA1B,CAAR;AACAd,MAAIW,KAAKD,SAAS,CAAlB;AACA;AACD,UAASV,GAAT,CAAaW,CAAb,EAAgB;AACfxB,MAAI0B,GAAJ,CAAQC,GAAR,CAAYH,CAAZ,EAAeI,OAAf,CAAuB,QAAvB;AACA;AACD,UAASC,GAAT,CAAaL,CAAb,EAAgB;AACf,SAAOM,SAAS9B,IAAI0B,GAAJ,CAAQC,GAAR,EAAT,EAAwB,EAAxB,CAAP;AACA;AACD,UAASI,IAAT,GAAgB;AACf/B,QAAMP,EAAEuC,MAAF,CAASpC,IAAT,CAAN;AACAI,MAAI0B,GAAJ,CAAQO,EAAR,CAAW,QAAX,EAAqB,aAAK;AACzBjC,OAAIkC,OAAJ,CAAYC,IAAZ,CAAkBC,EAAEC,EAAEC,MAAJ,EAAYX,GAAZ,EAAlB;AACA,GAFD;AAGA;AACD,UAASY,KAAT,CAAexB,GAAf,EAAoBK,MAApB,EAA4B;AAC3B,MAAIA,MAAJ,EAAY;AACXpB,OAAIwC,SAAJ,CAAcL,IAAd,CAAmBlC,WAAWc,GAA9B;AACA,GAFD,MAEO;AACNd,cAAWc,GAAX;AACAf,OAAIwC,SAAJ,CAAcL,IAAd,CAAmBlC,QAAnB;AACA;AACD;AACD,UAASwC,KAAT,CAAelB,KAAf,EAAsB;AACrBrB,UAAQO,WAAW,YAAM;AACxBa,OAAI,CAAJ;AACAmB;AACA,GAHO,EAGL,GAHK,CAAR;AAIA;AACD,UAASC,IAAT,GAAgB;AACfC,eAAazC,KAAb;AACA;AACD,UAAS0C,MAAT,GAAkB;AACjB/B,MAAI,GAAJ;AACAL;AACA;;AAEDhB,MAAKW,MAAL,GAAcA,MAAd;AACAX,MAAKa,IAAL,GAAYA,IAAZ;AACAb,MAAKgB,KAAL,GAAaA,KAAb;AACAhB,MAAKsB,GAAL,GAAWA,GAAX;AACAtB,MAAKc,KAAL,GAAaA,KAAb;AACAd,MAAKe,KAAL,GAAaA,KAAb;AACAf,MAAKqB,GAAL,GAAWA,GAAX;AACArB,MAAKqC,GAAL,GAAWA,GAAX;AACArC,MAAK8B,GAAL,GAAWA,GAAX;AACA9B,MAAK+C,KAAL,GAAaA,KAAb;AACA/C,MAAKiD,KAAL,GAAaA,KAAb;AACAjD,MAAKkD,IAAL,GAAYA,IAAZ;AACAlD,MAAKoD,MAAL,GAAcA,MAAd;AACApD,MAAKuC,IAAL,GAAYA,IAAZ;;AAEAc,QAAOC,IAAP,GAActD,IAAd;AACA,QAAOA,IAAP;AACA,CAzFD","file":"process.js","sourcesContent":["define([\"uk\"], (uk) => {\r\n\tconst inst = u.extend( newPubSub() );\r\n\tconst ROOT = \"[data-root='process']\";\r\n\tconst temp = Handlebars.templates;\r\n\tlet els;\r\n\tlet doingMsg = \"\";\r\n\tlet timer;\r\n\t\r\n\t\r\n\tfunction resume() {\r\n\t\tuk.openModal(ROOT);\r\n\t}\r\n\tfunction open() {\r\n\t\tclear();\r\n\t\treset();\r\n\t\tuk.openModal(ROOT);\r\n\t}\r\n\tfunction close() {\r\n\t\tsetTimeout(() => uk.closeModal(ROOT), 1000);\r\n\t}\r\n\tfunction clear() {\r\n\t\tels.logs.empty();\r\n\t}\r\n\tfunction reset() {\r\n\t\tset(0);\r\n\t}\r\n\tfunction log(msg, type) {\r\n\t\tconst ctx = {};\r\n\t\tconst str = type || \"primary\";\r\n\t\tctx.message = msg;\r\n\t\tctx.type = str;\r\n\t\tctx[str] = true;\r\n\t\tels.logs.append( temp.procAlert(ctx) );\r\n\t}\r\n\tfunction inc(steps) {\r\n\t\tlet n = parseFloat(els.bar.val(), 10);\r\n\t\tset(n += steps || 1);\r\n\t}\r\n\tfunction set(n) {\r\n\t\tels.bar.val(n).trigger(\"change\");\r\n\t}\r\n\tfunction get(n) {\r\n\t\treturn parseInt(els.bar.val(), 10);\r\n\t}\r\n\tfunction init() {\r\n\t\tels = u.getEls(ROOT);\r\n\t\tels.bar.on(\"change\", e => {\r\n\t\t\tels.percent.text( $(e.target).val() );\r\n\t\t});\r\n\t}\r\n\tfunction doing(msg, append) {\r\n\t\tif (append) {\r\n\t\t\tels.currently.text(doingMsg + msg);\r\n\t\t} else {\r\n\t\t\tdoingMsg = msg;\r\n\t\t\tels.currently.text(doingMsg);\r\n\t\t}\r\n\t}\r\n\tfunction start(steps) {\r\n\t\ttimer = setTimeout(() => {\r\n\t\t\tinc(1);\r\n\t\t\tstart();\r\n\t\t}, 800);\r\n\t}\r\n\tfunction stop() {\r\n\t\tclearTimeout(timer);\r\n\t}\r\n\tfunction finish() {\r\n\t\tset(100);\r\n\t\tclose();\r\n\t}\r\n\t\r\n\tinst.resume = resume;\r\n\tinst.open = open;\r\n\tinst.close = close;\r\n\tinst.log = log;\r\n\tinst.clear = clear;\r\n\tinst.reset = reset;\r\n\tinst.set = set;\r\n\tinst.get = get;\r\n\tinst.inc = inc;\r\n\tinst.doing = doing;\r\n\tinst.start = start;\r\n\tinst.stop = stop;\r\n\tinst.finish = finish;\r\n\tinst.init = init;\r\n\t\r\n\twindow.proc = inst;\r\n\treturn inst;\r\n});"]}